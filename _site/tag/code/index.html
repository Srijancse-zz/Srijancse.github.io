<!DOCTYPE html>
<html lang="en">
<head>
    <!-- http redirect for github pages -->
    <script type="text/javascript">
        var host = 'srijancse.github.io';
        if ((host === window.location.host) && (window.location.protocol === 'http:')) {
            window.location.protocol = 'http'; // without ':' for firefox compatibility
        }
    </script>
    <!-- styles -->
    <link rel="stylesheet" href=" /css/main.css ">
    <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700|Lato:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="Srijan Agarwal: Web Developer" property="og:title">
    <meta content="Srijan Agarwal: Web Developer" property="twitter:title">
    <meta content="website" property="og:type">
    <meta content="Srijan Agarwal" property="og:site_name">
    <meta property="fb:admins" content="1103227056" />
    <meta name="google-site-verification" content="bnuGRmgx_XG_VFyzEgt7GUg9BX6349k3A2aGUZjn2wY" />
    <!-- title and desc -->
    <title>Srijan Agarwal</title>
    <meta name="description" content="I write code, read papers, and think thoughts.">

    <link rel="canonical" href="http://localhost:4000/tag/code/">
    <link rel="alternate" type="application/rss+xml" title="Srijan Agarwal" href="http://localhost:4000/feed.xml">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-3981900510519098",
        enable_page_level_ads: true
      });
    </script>
</head>

<body class="width mx-auto px3 my4">
    <h2>code</h2>
<ul>

  <li><a href="/writing/analysing-ot/">Analysing different Operational Transformation algorithms for collaborative editing</a> (08 Jun 2017 | Tags: <!DOCTYPE html>
<html lang="en">
<head>
    <!-- http redirect for github pages -->
    <script type="text/javascript">
        var host = 'srijancse.github.io';
        if ((host === window.location.host) && (window.location.protocol === 'http:')) {
            window.location.protocol = 'http'; // without ':' for firefox compatibility
        }
    </script>
    <!-- styles -->
    <link rel="stylesheet" href=" /css/main.css ">
    <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700|Lato:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="Srijan Agarwal: Web Developer" property="og:title">
    <meta content="Srijan Agarwal: Web Developer" property="twitter:title">
    <meta content="website" property="og:type">
    <meta content="Srijan Agarwal" property="og:site_name">
    <meta property="fb:admins" content="1103227056" />
    <meta name="google-site-verification" content="bnuGRmgx_XG_VFyzEgt7GUg9BX6349k3A2aGUZjn2wY" />
    <!-- title and desc -->
    <title>Analysing different Operational Transformation algorithms for collaborative editing | Srijan Agarwal</title>
    <meta name="description" content="IntroductionThis is the third post in my series of Operational Transformation (OT), the real time collaborative editing algorithm. The first and second posts...">

    <link rel="canonical" href="http://localhost:4000/writing/analysing-ot/">
    <link rel="alternate" type="application/rss+xml" title="Srijan Agarwal" href="http://localhost:4000/feed.xml">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-3981900510519098",
        enable_page_level_ads: true
      });
    </script>
</head>

<body class="width mx-auto px3 my4">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <h1 class="top-subtitle">
        <a href="/writing/">Writing</a>
        <a href="/"><div class="dot"></div></a>
    </h1>
    <h1 class="title" itemprop="name headline"><a href="">Analysing different Operational Transformation algorithms for collaborative editing</a></h1>
    <div class="meta">
        <span class="h1" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/"><span itemprop="name">Srijan Agarwal</span></a>
        </span>
        <time datetime="2017-06-08T05:43:39+02:00" itemprop="datePublished" title="It was a beautiful day!">
            8 Jun 2017
        </time>
    </div>
  </header>

  <div class="content" itemprop="articleBody">
    <p><strong>Introduction</strong>
This is the third post in my series of <strong>Operational Transformation (OT)</strong>, the real time collaborative editing algorithm. The first and second posts were <a href="https://medium.com/@srijancse/how-real-time-collaborative-editing-work-operational-transformation-ac4902d75682">How Real-Time Collaborative Editors work? [Operational Transformation]</a> and <a href="https://medium.com/@srijancse/operational-transformation-the-real-time-collaborative-editing-algorithm-bf8756683f66">Operational Transformation, the real time collaborative editing algorithm respectively</a>.</p>

<p>As mentioned in earlier posts, Operational transformation was originally born due the need of consistency maintenance in collaborative text editors. In the span of over two decades OTs have gained new capabilities (such as undo operations and group undo) and have been applied to different applications ranging from HTML/XML editing, office tools and even 3D digital media design tools.</p>

<p>There are many established approaches that exists to operational transformation. In this post, I will walk through the different OT algorithms that are well defined and implemented.</p>

<h3 id="definitionsterms-used-">Definitions/Terms used :</h3>
<p>In the second post, I explained about the two kinds of Transformation functions, i.e, Inclusion Transformation and Exclusion Transformation. These functions have two properties/preconditions which ensures OT correctness. TP1 and TP2 are the transformation/convergence properties.</p>

<p><strong>TP1</strong> : For two concurrent operations O1 and O2, the transform function (T) satisfies TP1 iff O1 o T(O2, O1) ≡ O2 o T(O1, O2) where o denotes the sequence of operations containing Oi followed by Oj and ≡ denotes the equivalence of the two operations.</p>

<p><strong>Precondition of TP1</strong> : TP1 is required only if the Operational Transformation system allows any two operations to be executed in different orders.</p>

<div class="image-wrap">
<div class="image-block">
    <img src="/images/OTtp1.jpg" alt="TP1" />
</div>
</div>

<p><strong>TP2</strong> : For three concurrent operations O1, O2 and O3, the transform function (T) satisfies TP2 iff T(O3, O1 o T(O2, O1)) ≡ T(O3, O2 o T(O1, O2)).</p>

<div class="image-wrap">
<div class="image-block">
    <img src="/images/OTtp2.jpg" alt="TP2" />
</div>
</div>

<p><strong>Precondition of TP2</strong> : TP2 is required only if the OT system allows two operations O1 and O2 be IT-transformed in two different document states (or contexts).</p>

<p>** 1. dOPT — distributed OPerational Transformation**</p>

<p>The dOPT Algorithm was one of the first approaches to OT. In dOPT Algorithm, each machine has an identifier i, which could be an IP or MAC. Each machine has to maintain a state vector s with n components where n is the number of machines. The i component store the number of changes recorded by the ith machine. The requests are of the form: &lt; i, s, o, p &gt;</p>

<ul>
  <li>
    <p>i — the original site’s identifier</p>
  </li>
  <li>
    <p>s — the state vector of the machine which is sending</p>
  </li>
  <li>
    <p>o — the operation which needs to be performed</p>
  </li>
  <li>
    <p>p — the priority which is associated with o [<strong>this is where the algorithm got wrong</strong>]</p>
  </li>
</ul>

<p>A transformation matrix, denoted as T, is what solves <em>conflicting operations</em>. T is a <em>m x m</em> matrix, where <em>m</em> is the number of supported operations in the group-ware system. Each entry in the matrix is a function which transforms operations into other operations and to ensure convergence dOPT requires the Transformation Property 1.</p>

<p>For handling requests, the actions are based on comparisons between <em>s_i</em> [sending state] and <em>s_x</em> [receiving state]. If they are same i.e <em>s_i = s_x</em>, <em>o</em> is executed immediately, if <em>s_i &gt; s_x</em>, <em>o</em> is queued and executed later and if <em>s_i &lt; s_x</em>, <em>o</em> is transformed and then executed.</p>

<p>** Strengths of the algorithm ** :</p>

<ul>
  <li>
    <p>Immediate feedback for local operations.</p>
  </li>
  <li>
    <p>Does not require locking of resources.</p>
  </li>
  <li>
    <p>Relatively easy to implement due to its simple data structures.</p>
  </li>
  <li>
    <p>Satisfies the <em>precedence property</em>, which is defined as, a consistency property which ensures that the execution order is the same as the operations natural cause-effect order. In other words if an operation O1 causally precedes another operation O2, then at every site O1 will be executed before O2.</p>
  </li>
  <li>
    <p>Enforces the <em>Transformation property 1</em>.</p>
  </li>
</ul>

<p><strong>Problems:</strong></p>

<p>The priority, <em>p</em>, suggested doesn’t work great for two clients. It fails whenever an operation is concurrent with two or more dependent operations. This algorithm is distributed and does not have a <strong>central server</strong>.</p>

<p><strong>1.1. adOPTed Algorithm</strong></p>

<p>The shortcomings in dOPT were in the way it transformed operations. The adOPTed introduced the second transformation property [TP2] which ensures that transformation of an operation along different paths will yield the same resulting operation.</p>

<p>The adOPTed algorithm is right in general, and solves most of the shortcomings of dOPT algorithm but <strong>has not proved Intention Preservation property</strong>, which is defined as, a consistency property which ensures that the intention of an operation is preserved after a transformation. The intention of an operation, O, is the effect of applying O on the resource where the operation was generated.</p>

<p><strong>2. GOT and GOTO — Generic and Generic Optimized Operational Transformation</strong></p>

<p>GOT control algorithm maintains convergence nicely i.e. when the same set of operations have been executed at all sites, all copies of the document which is shared are identical. Also, it is integrated with Undo/Do/Redo Scheme which states that when a new operation O is ready;</p>

<ul>
  <li>
    <p><strong>Undo</strong> operations in <strong>History Buffer (HB)</strong> (which is defined as ‘saved executed operations at each site’) which totally follow O to restore the document to the state before their execution.</p>
  </li>
  <li>
    <p><strong>Do</strong> O (the operation)</p>
  </li>
  <li>
    <p><strong>Redo</strong> all operations that were undone from the HB.</p>
  </li>
</ul>

<p>Also, in this convergence TP2 is not a necessary condition i.e the precondition CP2/TP2 is required only if the OT systems allows two operations op1 and op2 be IT-transformed [inclusion transformation] in two different document states.</p>

<p><strong>Strengths of the algorithm :</strong></p>

<ul>
  <li>OT based undo is established, faster and more efficient undo based operations.</li>
  <li><em>Convergence property</em> is fulfilled, which is defined as, a consistency property which ensures that copies of a shared resource are identical at all sites in state of rest (i.e. ensuring that all operations are executed).</li>
</ul>

<p><strong>Problems :</strong></p>

<p>The algorithm only supports basic string operations i.e Insert/Delete. Also, correctness proof of algorithm is missing.</p>

<p><strong>GOTO Algorithm</strong> is the <strong>O</strong>ptimized version of GOT Algorithm. The optimization takes place because of two postconditions, <strong>TP1</strong> and <strong>TP2</strong> to reduce the number of <strong>IT/ET</strong> (Inclusion/Exclusion) transformations by adding the properties from adOPTed.</p>

<p>GOTO algorithm uses the function <strong>convert2HC()</strong> which basically uses ET between an insert and a delete [concurrent], what basically happens is we transpose the entire history to obtain the concurrent operations when integrating a remote operation. The algorithm fulfills the convergence property, precedence property, TP1, TP2 and has better undo operations, but was <strong>never theoretically proven correct for all scenarios.</strong></p>

<p><strong>3. COT — Context-based Operational Transformation</strong></p>

<p>The COT algorithm does not use a history buffer (HB) when an operation is executed, instead it keeps track of the document state in which a operation have been executed in. So instead of a HB it has a context vector.</p>

<p>In an OT-based collaborative editor, a document state can be uniquely characterized by the set of original operations executed so far on the document. These original operations may be executed in different orders or forms at different sites, but they must produce the same document state according to the convergence/transformation properties . Moreover, the difference between two document states can be expressed in terms of different original operations executed in these two states. Since every transformed operation must come from an original operation, org(O) is used to denote the original operation of O.
A document state, denoted as** DS**, can be represented as :</p>

<ul>
  <li>
    <p>The initial Document State is represented by DS = { }</p>
  </li>
  <li>
    <p>After executing an operation O on DS, the new Document State DS’ = DS ∪ { org(O) }.</p>
  </li>
</ul>

<p>An operation is defined by a site identifier and a number given when it is generated. This operation in turn has <strong>a context vector</strong> that contains the operation context in terms of operations that precedes it. The operations inside the context vector in turn have their own site identifiers and defining numbers.
This is the main difference since COT heavily relies on every operation which is to be executed on the same document state on all locations, if the operation is executed on the same document state at all sites the result can not diverge.</p>

<p>A context vector, denoted as CV(O), can be represented as :</p>

<p><strong>CV(O) = [(ns⁰, ic⁰), (ns¹, ic¹), . . . , (ns^N-1, ic^N-1)]</strong> where 0 ≤ i ≤ N-1 and</p>

<ul>
  <li>
    <p>ns^i represents all original normal operations at site i</p>
  </li>
  <li>
    <p>ic^i = [(ns⁰, is⁰), (ns¹, is¹), . . . , (ns^k-1, is^k-1)] represents all inverse operations for undoing normal operations at site i.</p>
  </li>
</ul>

<p>Also to capture the essential requirements for correct operation execution and transformation, a set of six rules called Context-based Conditions (CCs) were introduced.</p>

<ul>
  <li>
    <p>CC1: Given a original operation O and a document state DS, where O ∉ DS, O can be transformed for execution on DS only if C(O) ⊆ DS.</p>
  </li>
  <li>
    <p>CC2: Given an original operation O and a document state DS, where O ∉ DS and C(O) ⊆ DS, DS-C(O)² is the set of operations that O must be transformed against before being executed on DS.</p>
  </li>
  <li>
    <p>CC3: Given any operation O and a state DS, O can be executed on DS only if C(O) = DS.</p>
  </li>
  <li>
    <p>CC4: Given an original operation Ox and a operation O of any type, where Ox ∉ C(O), Ox can be transformed to the context of O only if C(Ox) ⊆ C(O).</p>
  </li>
  <li>
    <p>CC5: Given an original operation Ox and a operation O of any type, where Ox ∉ C(O) and C(Ox) ⊆ C(O), C(O) ≠ C(Ox) is the set of operations that Ox must be transformed against before being IT-transformed with O.</p>
  </li>
  <li>
    <p>CC6: Given two operations Oa and Ob, they can be IT-transformed with each other IT(Oa,Ob) or IT(Ob,Oa), only if C(Oa) = C(Ob).</p>
  </li>
</ul>

<p>Due to these conditions and the context vector the COT algorithm is optimized to the extent that it does not even have a need for the <strong>ET</strong> transformations. This is made possible because of the context vector that enables a better use of <strong>IT</strong>s.</p>

<p><strong>Strengths of the algorithm:</strong></p>

<ul>
  <li>
    <p>Fulfils the convergence property.</p>
  </li>
  <li>
    <p>Fulfils the precedence property.</p>
  </li>
  <li>
    <p>Platform capable of more than text editing.</p>
  </li>
  <li>
    <p>Has been well tested as it has been implemented in several editing programs such as CoMaya, CoWord and more.</p>
  </li>
</ul>

<p><strong>Problems :</strong></p>

<p>Requires more memory than other algorithms because of the nature of context vectors but can be optimized in the same way other algorithms have.</p>

<p><strong>4. Google Wave OT Algorithm</strong></p>

<p>Google Wave OT is basically based on the algorithm given by Jupiter System [dOPT algorithm]. Having a simple and efficient server is important in making wave’s reliable and scalable. With this goal, Google’s Operational Transformation algorithm modifies the basic theory of OT by requiring the client to wait for <strong>acknowledgement [ACKs]</strong> (In the <a href="https://medium.com/@srijancse/operational-transformation-the-real-time-collaborative-editing-algorithm-bf8756683f66">second post</a>, I have explained Client — Server Acknowledgement approach) from the server before sending more operations. When a server acknowledges a client’s operation, it means the server has transformed the client’s operation, applied it to the server’s copy of the wavelet and broadcast the transformed operation to all other connected clients. While the client is waiting for the acknowledgement, it caches operations produced locally and sends them in bulk later.</p>

<p>With the addition of acknowledgements, a client can infer the server’s OT path. By having this, the client can send operations to the server that are always on the server’s OT path.</p>

<p>This has the important benefit that the server only needs to have <strong>a single state space</strong>, which is the history of operations it has applied. When it receives a client’s operation, it only needs to transform the operation against the operation history, apply the transformed operation, and then broadcast it. This source of truth also forces the client to wait for the server to acknowledge the operation that the client has just sent which would mean that the client always stays on the server’s OT path. This would help in keeping a single history of operations without actually having to keep a mirror of the state for each client that is connected. That would eventually mean the number of clients that are connected to the server would have only one single copy of the document on the server. One trade off of this change is that a client will see chunks of operations (accumulated batch operations) from another client in intervals of approximately one round trip time to the other client.</p>

<p>Google Wave OT solves most of the flaws by its Acknowledge command and by strictly limiting the number of participants in communication to two. If the number of clients were increased to three, <strong>17%</strong> of the time, conflicts arose. However, there is one flaw that might have slipped through, which is intention preservation.</p>

<p><strong>Conclusion</strong></p>

<p>What I think would be a viable approach is when we can incorporate <strong>Context based OT</strong> with G<strong>oogle wave OT</strong>, since COT would be able to provide a better intention preservation. Also, COT algorithm is not based on when the operation arrives at different places but in what context [CV(O)] the original operation was executed in. Therefore at each site when Oi arrives a comparison will be made with Oi’s context vector and the site’s own document state.</p>

<p>Also, note that not all Operational Transformation approaches has been taken into considerations. I have merely listed those which I believed are the most significant ones.</p>

<p>I would also be researching and writing another post on why Google Wave OT failed in practice by using whatever source code provided by Google implementing a test to prove that Waves OT fails to preserve true intention in practice. Also, I may perform a benchmarking with COT and Google Wave together to know if really COT can be incorporated with Google Wave’s OT.</p>

  </div>
</article>

  



    <script>
    (function() {
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        var GOOGLE_ANALYTICS_TRACKING_ID = "UA-83244237-1";

        ga('create', GOOGLE_ANALYTICS_TRACKING_ID, 'auto');
        ga('send', 'pageview');
    })();
</script>

</body>

</html>
)</li>

  <li><a href="/writing/operational-transformation/">Operational Transformation, the real time collaborative editing algorithm [Operations and Transformations]</a> (11 May 2017 | Tags: <!DOCTYPE html>
<html lang="en">
<head>
    <!-- http redirect for github pages -->
    <script type="text/javascript">
        var host = 'srijancse.github.io';
        if ((host === window.location.host) && (window.location.protocol === 'http:')) {
            window.location.protocol = 'http'; // without ':' for firefox compatibility
        }
    </script>
    <!-- styles -->
    <link rel="stylesheet" href=" /css/main.css ">
    <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700|Lato:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="Srijan Agarwal: Web Developer" property="og:title">
    <meta content="Srijan Agarwal: Web Developer" property="twitter:title">
    <meta content="website" property="og:type">
    <meta content="Srijan Agarwal" property="og:site_name">
    <meta property="fb:admins" content="1103227056" />
    <meta name="google-site-verification" content="bnuGRmgx_XG_VFyzEgt7GUg9BX6349k3A2aGUZjn2wY" />
    <!-- title and desc -->
    <title>Operational Transformation, the real time collaborative editing algorithm [Operations and Transformations] | Srijan Agarwal</title>
    <meta name="description" content="This is the second post related to Operational Transformation, the real time collaborative editing algorithm. The first post was How Real-Time Collaborative ...">

    <link rel="canonical" href="http://localhost:4000/writing/operational-transformation/">
    <link rel="alternate" type="application/rss+xml" title="Srijan Agarwal" href="http://localhost:4000/feed.xml">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-3981900510519098",
        enable_page_level_ads: true
      });
    </script>
</head>

<body class="width mx-auto px3 my4">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <h1 class="top-subtitle">
        <a href="/writing/">Writing</a>
        <a href="/"><div class="dot"></div></a>
    </h1>
    <h1 class="title" itemprop="name headline"><a href="">Operational Transformation, the real time collaborative editing algorithm [Operations and Transformations]</a></h1>
    <div class="meta">
        <span class="h1" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/"><span itemprop="name">Srijan Agarwal</span></a>
        </span>
        <time datetime="2017-05-11T17:43:39+02:00" itemprop="datePublished" title="It was a beautiful day!">
            11 May 2017
        </time>
    </div>
  </header>

  <div class="content" itemprop="articleBody">
    <p>This is the second post related to <strong>Operational Transformation</strong>, the real time collaborative editing algorithm. The first post was <a href="http://www.srijanagarwal.me/writing/collaborative-editing/">How Real-Time Collaborative Editors work? [Operational Transformation]</a>.</p>

<p>In this post, I would be digging deep into the transformation function, how clients wait for <strong>acknowledgement</strong> from server before sending more operations and the compound operational transformation.</p>

<h3 id="transformation-function">Transformation function</h3>
<p>To recap, for handling concurrent operations, we use the <strong>tranform</strong> function that takes two operations that have been applied to the same document state (but on different clients) and computes a new operation that can be applied after the second operation and that preserves the first operation’s intended change.</p>

<p>Basically, there exists two kinds of transformation functions :</p>

<ul>
  <li>
    <p><strong>Inclusion Transformation</strong> : denoted as IT(a, b), which transforms Operation <code class="highlighter-rouge">a</code> against another operation <code class="highlighter-rouge">b</code> in such a way that the impact of <code class="highlighter-rouge">b</code> is effectively included.</p>
  </li>
  <li>
    <p><strong>Exclusion Transformation</strong> : denoted as ET(a, b), which transforms operation <code class="highlighter-rouge">a</code> against another operation <code class="highlighter-rouge">b</code> in such a way that the impact of <code class="highlighter-rouge">b</code> is effectively excluded.</p>
  </li>
</ul>

<p>Transformation functions are named differently in different OT systems, and some compound transformation functions may combine both IT and ET functionalities in one function. One of the papers, <a href="http://www.springer.com/cda/content/document/cda_downloaddocument/9788132226369-c2.pdf?SGWID=0-0-45-1564306-p177709634">Analysis of Operational Transformation Algorithms</a> is really good, and analyses all the different OT systems.</p>

<h4 id="character-wise-transformation-function">Character wise Transformation Function</h4>

<p>A character wise transformation function’s algorithm (for consistency maintenance) is simple.  As an example, for a pair of character-wise operations <code class="highlighter-rouge">Ins[p, c]</code> (to insert a character c at the position p) and <code class="highlighter-rouge">Del[p]</code> (to delete a character at position p), four IT functions, denoted as <code class="highlighter-rouge">Tii</code>, <code class="highlighter-rouge">Tid</code>, <code class="highlighter-rouge">Tdi</code>, <code class="highlighter-rouge">Tdd</code>, can be defined as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Tii(Ins[p1,c1], Ins[p2, c2]) {
      if p1 &lt; p2  or (p1 = p2 and u1 &gt; u2) // breaking insert-tie using user identifiers (u1, u2)
            return Ins[p1, c1];  // e.g. Tii(Ins[3, “a”], Ins[4, “b”]) = Ins[3, “a”]
      else return Ins[p1+1, c1]; } // Tii(Ins[3, “a”], Ins[1, “b”]) = Ins[4, “a”]
 
Tid(Ins[p1,c1], Del[p2]) {          
      if p1 &lt;= p2 return Ins[p1, c1]; // e.g. Tid(Ins[3, “a”], Del[4]) = Ins[3, “a”]
     else return Ins[p1-1, c1]; } // Tid(Ins[3, “a”], Del[1] ) = Ins[2, “a”]
 
Tdi(Del[p1], Ins[p2, c2]) {
      if p1 &lt; p2 return Del[p1];  // e.g.  Tdi(Del[3], Ins[4, “b”]) = Del[3]
      else return Del[p1+1]; } // Tdi(Del[3], Ins[1, “b”]) = Del[4]
 
Tdd(Del[p1], Del[p2]) {
      if p1 &lt; p2 return Del[p1]; // e.g.   Tdd(Del[3], Del[4]) = Del[3]
      else if p1 &gt; p2 return Del[p1-1]; // Tdd(Del[3], Del[1]) = Del[2]
      else return I; } // breaking delete-tie using I (identity op)  Tdd(Del[3]. Del[3]) = I 
</code></pre></div></div>
<p>String-wise transformation function’s algorithm is significantly more challenging than character-wise operations’ because:</p>

<ul>
  <li>
    <p>a string delete covers a deleting range, which may include the characters in the string as well as the interval positions between characters.</p>
  </li>
  <li>
    <p>concurrent string delete operations may arbitrarily overlap with each other and even with concurrent insert operations.</p>
  </li>
  <li>
    <p>a string inserted by a previous insert operation may be changed by following (causally after) insert and delete operations.</p>
  </li>
</ul>

<h3 id="undo-related-application">Undo Related Application</h3>

<p>Operational Transformation ofcourse supports undo in collaborative editors which impose additional  requirements :</p>

<ul>
  <li>
    <p>One is the undo effect, which requires that undoing an operation O achieves the effect of eliminating the effect of O but retains the effects of other operations in the document. In other words, the effect of undoing O is to <code class="highlighter-rouge">transform</code> the document state into one that it would have gone to if O had never been performed but other operations had been performed. This undo effect is consistent with the linear undo effect in single-user editing environments, and also suitable for non-linear undo (e.g. “undoing any operation at any time”) in multi-user and concurrent editing environments.</p>
  </li>
  <li>
    <p>The other is the undo property, which requires that the document be restored to any previous state by undoing all operations executed after that state, regardless of the order in which those operations are undone. This property is required to ensure the capability of “restoring any prior state”, which is essential for an undo solution to support error-recovery and alternative exploration.</p>
  </li>
</ul>

<div class="image-wrap">
<div class="image-block">
    <img src="/images/undo.jpg" alt="undo" />
</div>
</div>

<h3 id="client---server-acknowledgement-approach">Client - Server Acknowledgement approach</h3>

<p>Just to recap, what the theory of Operational Transformation in <a href="http://lively-kernel.org/repository/webwerkstatt/projects/Collaboration/paper/Jupiter.pdf">High Latency, Low-Bandwidth Windowing in the Jupiter Collaboration System</a> says is that a client can send operations in a sequence to the server and vice versa. This means that the client and server can traverse through the state space through different paths of operational transformation to the same convergent state depending on when they receive the other operations.</p>

<div class="image-wrap">
<div class="image-block">
    <img src="/images/ot-paths.png" alt="otpath" />
</div>
</div>

<p>When multiple clients are connected to the server, every client and server pair have their own state space. One shortcoming of this is that the server would need to carry a state space for every connected client, which can be very memory-intensive. In addition, this complicates the server algorithm by requiring it to convert clients’ operations between state spaces.</p>

<p>Having a simple and efficient server is important in making waves reliable and scalable. With this goal, Google’s Operational Transformation algorithm modifies the basic theory of OT by requiring the client to wait for <strong>acknowledgement</strong> from the server before sending more operations. When a server acknowledges a client’s operation, it means the server has transformed the client’s operation, applied it to the server’s copy of the wavelet and broadcast the transformed operation to all other connected clients. While the client is waiting for the acknowledgement, it caches operations produced locally and sends them in bulk later.</p>

<p>With the addition of acknowledgements, a client can infer the server’s OT path. By having this, the client can send operations to the server that are always on the server’s OT path.</p>

<p>This has the important benefit that the server only needs to have <strong>a single state space</strong>, which is the history of operations it has applied. When it receives a client’s operation, it only needs to transform the operation against the operation history, apply the transformed operation, and then broadcast it. This source of truth also forces the client to wait for the server to <strong>acknowledge</strong> the operation that the client has just sent which would mean that the client always stays on the server’s OT path. This would help in keeping a single history of operations without actually having to keep a mirror of the state for each client that is connected. That would eventually mean the number of clients that are connected to the server would have only one single copy of the document on the server. One trade off of this change is that a client will see chunks of operations from another client in intervals of approximately one round trip time to the other client.</p>

<div class="image-wrap">
<div class="image-block">
    <img src="/images/ot.png" alt="ot" />
</div>
</div>

<h3 id="compound-operational-transformation">Compound Operational Transformation</h3>
<p>A great tutorial on Compound Operational Transformation is <a href="http://www.codecommit.com/blog/java/understanding-and-applying-operational-transformation">Understanding and Applying Operational Transformation by Daniel Spiewak</a>. One must read this to understand how Compound Operational Transformation works.</p>

<h3 id="conclusion">Conclusion</h3>

<p>As I have mentioned earlier, <strong>Operational Transformation</strong> is a very powerful tool that allows to build great collaborative apps with support for non-blocking concurrent editing. I would keep updating the blogpost with whatever I learn more about OT and other real time collaborative editing algorithms.</p>

<p>Quoting from the <a href="https://en.wikipedia.org/wiki/Operational_transformation#Critique_of_OT">Wikipedia’s Page</a>:</p>

<p>While the classic OT approach of defining operations through their offsets in the text seems to be simple and natural, real-world distributed systems raise serious issues. Namely, that operations propagate with finite speed, states of participants are often different, thus the resulting combinations of states and operations are extremely hard to foresee and understand. As Li and Li put it, “Due to the need to consider complicated case coverage, formal proofs are very complicated and error-prone, even for OT algorithms that only treat two characterwise primitives (insert and delete)”.</p>

<p>Similarly, Joseph Gentle who is a former Google Wave engineer and an author of the Share.JS library wrote, “Unfortunately, implementing OT sucks. There’s a million algorithms with different tradeoffs, mostly trapped in academic papers. The algorithms are really hard and time consuming to implement correctly. […] Wave took 2 years to write and if we rewrote it today, it would take almost as long to write a second time.”</p>

<p>For OT to work, every single change to the data needs to be captured: “Obtaining a snapshot of the state is usually trivial, but capturing edits is a different matter altogether. […] The richness of modern user interfaces can make this problematic, especially within a browser-based environment.” An alternative to OT is differential synchronization.</p>

<h3 id="references">References</h3>

<p>I’ve read the following papers and articles to learn about Operational Transformation.</p>

<ul>
  <li>
    <p><a href="http://lively-kernel.org/repository/webwerkstatt/projects/Collaboration/paper/Jupiter.pdf">High Latency, Low-Bandwidth Windowing in the Jupiter Collaboration System</a> <em>Authored by David A. Nichols, Pavel Curtis, Michael Dixon, and John Lamping.</em></p>
  </li>
  <li>
    <p><a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.53.933&amp;rep=rep1&amp;type=pdf">Operational Transformation in Real-Time Group Editors: Issues, Algorithms, and Achievements</a> <em>Authored by Chengzheng Sun and Clarence (Skip) Ellis.</em></p>
  </li>
  <li>
    <p><a href="http://www.waveprotocol.org/whitepapers/operational-transform">Google’s whitepaper on Operational Transformation</a></p>
  </li>
  <li>
    <p><a href="https://www.lri.fr/~mbl/ENS/CSCW/2012/papers/Ellis-SIGMOD89.pdf">Concurrency Control in Groupware Systems</a> <em>Authored by C.A. Ellis, S.J. Gibbs</em></p>
  </li>
  <li>
    <p><a href="https://hal.archives-ouvertes.fr/file/index/docid/629503/filename/doce63-ahmednacer.pdf">Evaluating CRDTs for Real-time Document Editing</a> <em>Authored by Mehdi Ahmed-Nacer, Claudia-Lavinia Ignat, G´erald Oster, Hyun-Gul Roh, Pascal Urso</em></p>
  </li>
  <li>
    <p><a href="https://hal.inria.fr/hal-00957167/document">Merging OT and CRDT Algorithms</a> <em>Authored by Mehdi Ahmed-Nacer, Pascal Urso, Valter Balegas, Nuno Pregui¸ca</em></p>
  </li>
  <li>
    <p><a href="https://en.wikipedia.org/wiki/Operational_transformation">Wikipedia on Operational Transformation</a> <em>One of the most informative articles, I have found on wikipedia, suprisingly.</em></p>
  </li>
</ul>


  </div>
</article>

  



    <script>
    (function() {
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        var GOOGLE_ANALYTICS_TRACKING_ID = "UA-83244237-1";

        ga('create', GOOGLE_ANALYTICS_TRACKING_ID, 'auto');
        ga('send', 'pageview');
    })();
</script>

</body>

</html>
)</li>

  <li><a href="/writing/collaborative-editing/">How Real-Time Collaborative Editors work? [Operational Transformation]</a> (01 May 2017 | Tags: <!DOCTYPE html>
<html lang="en">
<head>
    <!-- http redirect for github pages -->
    <script type="text/javascript">
        var host = 'srijancse.github.io';
        if ((host === window.location.host) && (window.location.protocol === 'http:')) {
            window.location.protocol = 'http'; // without ':' for firefox compatibility
        }
    </script>
    <!-- styles -->
    <link rel="stylesheet" href=" /css/main.css ">
    <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700|Lato:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="Srijan Agarwal: Web Developer" property="og:title">
    <meta content="Srijan Agarwal: Web Developer" property="twitter:title">
    <meta content="website" property="og:type">
    <meta content="Srijan Agarwal" property="og:site_name">
    <meta property="fb:admins" content="1103227056" />
    <meta name="google-site-verification" content="bnuGRmgx_XG_VFyzEgt7GUg9BX6349k3A2aGUZjn2wY" />
    <!-- title and desc -->
    <title>How Real-Time Collaborative Editors work? [Operational Transformation] | Srijan Agarwal</title>
    <meta name="description" content="Recently, I’ve been diving deep on how real-time collaborative editing works. I have been reading various papers on both the methods of implementing collabor...">

    <link rel="canonical" href="http://localhost:4000/writing/collaborative-editing/">
    <link rel="alternate" type="application/rss+xml" title="Srijan Agarwal" href="http://localhost:4000/feed.xml">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-3981900510519098",
        enable_page_level_ads: true
      });
    </script>
</head>

<body class="width mx-auto px3 my4">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <h1 class="top-subtitle">
        <a href="/writing/">Writing</a>
        <a href="/"><div class="dot"></div></a>
    </h1>
    <h1 class="title" itemprop="name headline"><a href="">How Real-Time Collaborative Editors work? [Operational Transformation]</a></h1>
    <div class="meta">
        <span class="h1" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/"><span itemprop="name">Srijan Agarwal</span></a>
        </span>
        <time datetime="2017-05-01T02:43:39+02:00" itemprop="datePublished" title="It was a beautiful day!">
            1 May 2017
        </time>
    </div>
  </header>

  <div class="content" itemprop="articleBody">
    <p>Recently, I’ve been diving deep on how <strong>real-time collaborative</strong> editing works. I have been reading various papers on both the methods of implementing collaborative editing : <strong>Operational Transformation</strong>, which goes back to 1989, when it was first implemented by the <a href="https://www.lri.fr/~mbl/ENS/CSCW/2012/papers/Ellis-SIGMOD89.pdf">GROVE (GRoup Outtie Viewing Editor)</a> system (this algorithm is quite old, and Google uses this algorithm for collaborative editing for Google Docs, Google Slides, Wave, etc) and <strong>Conflict-Free Replicated Data Types</strong>, which is a much newer approach to real-time editing.</p>

<h3 id="real-challenge-of-collaborative-editing">Real challenge of collaborative editing</h3>

<p>If you know how real-time collaborative editing works, then you may know that handling concurrent editing in multi user environment gracefully is very challenging. However, a few simple concepts can simplify this problem. The main challenge, as mentioned, with collaborative editing is the concurrency control [<strong>concurrent edits</strong>] to the document are not commutative. This needs to be causally ordered before applying either by undoing history, or by transforming the operations [<strong>operational transformation</strong>] before applying them to make them seem commutative.</p>

<h3 id="bringing-latency-into-action">Bringing Latency into action</h3>

<p>Introducing latency between the client and server is where the problems arise. Latency in a collaborative editor introduces the possibility of version conflicts. Here, where, I said Operational Transformation will come into action.</p>

<p>Let’s take an example :</p>

<p><strong>Starting Client’s state :</strong></p>

<p><code class="highlighter-rouge"> ABCD </code></p>

<p><strong>Starting Server’s state :</strong></p>

<p><code class="highlighter-rouge"> ABCD </code></p>

<p>Now, let’s say, <em>Client</em> enters <code class="highlighter-rouge">X</code> in between <code class="highlighter-rouge">C</code> and <code class="highlighter-rouge">D</code> , the operation would look something like this :</p>

<p><code class="highlighter-rouge">insert(X,3) //where 3 is the position where x is going to be added (0=A, 1=B, 2=C ..)</code></p>

<p>And at the same time, <em>Server</em> deletes <code class="highlighter-rouge">b</code> , the operation would be :</p>

<p><code class="highlighter-rouge">delete(B,1)</code></p>

<p>What actually should happen is that the client and server should both end with <code class="highlighter-rouge">ACXD</code> but in reality, <em>client</em> ends with <code class="highlighter-rouge">ACXD</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Starting Document State -&gt; ABCD
"Insert 'X'" operation at offset 3 [local] -&gt; ABCXD
"Delete 'B'" operation at offset 1 [remote] -&gt; ACXD
</code></pre></div></div>

<p>but the <em>server</em> ends with <code class="highlighter-rouge">ACDX</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Starting Document State -&gt; ABCD
"Delete 'B'" operation at offset 1 [local] -&gt; ACD
"Insert 'X'" operation at offset 3 [remote] -&gt; ACDX
</code></pre></div></div>

<p>Ofcourse, <code class="highlighter-rouge">ACXD != ACDX</code> and the document which is shared now is in wrong state.</p>

<p>Here is where the <strong>Operational Transformation</strong> algorithm comes to the rescue.</p>

<h3 id="operational-transformation-algorithm">Operational Transformation Algorithm</h3>

<p>Operational Transformation (OT) is an algorithm/technique for the transformation of operations such that they can be applied to documents whose states have diverged, bringing them both back to the same state.</p>

<h4 id="how-does-operational-transformation-work">How does Operational Transformation work?</h4>

<p>A short overview of how OT works :</p>

<ul>
  <li>
    <p>Every change (insertion or deletion) is represented as an <strong>operation</strong>. An operation can be applied to the current document which results into a new document state.</p>
  </li>
  <li>
    <p>To handle concurrent operations, we use the <strong>tranform</strong> function that takes two operations that have been applied to the same document state (but on different clients) and computes a new operation that can be applied after the second operation and that preserves the first operation’s intended change.</p>
  </li>
</ul>

<p>Let’s apply Operational Transformation in the original example.</p>

<p>If we apply OT, <em>Client</em> will see :</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Starting Document State -&gt; ABCD
"Insert 'X'" operation at offset 3 [local] -&gt; ABCXD
"Delete 'B'" operation at offset 1 [transformed] -&gt; ACXD
</code></pre></div></div>

<p>and <em>Server</em> will see :</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Starting Document State -&gt; ABCD
"Delete 'B'" operation at offset 1 [local] -&gt; ACD
"Insert 'X'" operation at offset 2 [transformed] -&gt; ACXD //Transform function would add add it in the new (3 - 1 = 2) position 
</code></pre></div></div>

<h3 id="client---server-ot-approach-to-collaborative-editing">Client - Server [OT] Approach to Collaborative Editing</h3>

<p>The <strong>transform</strong> function is used to build a client-server protocol that can handle collaboration between any number of clients.</p>

<p>Choosing a Client-Server architecture will allow scouting a large number of clients without actually complicating the environment. Also, there will be a single system which holds the source of truth i.e. the server, so even if the clients crash/go offline for a long time, we can go back to the server and fetch the document easily.</p>

<p>This source of truth also forces the client to wait for the server to <strong>acknowledge</strong> the operation that the client has just sent which would mean that the client always stays on the server’s OT path. This would help in keeping a single history of operations without actually having to keep a mirror of the state for each client that is connected. That would eventually mean the number of clients that are connected to the server would have only one single copy of the document on the server.</p>

<h3 id="conclusion">Conclusion</h3>

<p><strong>Operational Transformation</strong> is a very powerful tool that allows to build great collaborative apps with support for non-blocking concurrent editing. I am looking forward to dive deep into the algorithm (and ofcourse extending this blogpost) and possibly working on an editor which supports it as well.</p>

<h3 id="resources">Resources</h3>

<p>I’ve read the following papers and articles to learn about Operational Transformation.</p>

<ul>
  <li>
    <p><a href="http://lively-kernel.org/repository/webwerkstatt/projects/Collaboration/paper/Jupiter.pdf">High Latency, Low-Bandwidth Windowing in the Jupiter Collaboration System</a> <em>Authored by David A. Nichols, Pavel Curtis, Michael Dixon, and John Lamping.</em></p>
  </li>
  <li>
    <p><a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.53.933&amp;rep=rep1&amp;type=pdf">Operational Transformation in Real-Time Group Editors: Issues, Algorithms, and Achievements</a> <em>Authored by Chengzheng Sun and Clarence (Skip) Ellis.</em></p>
  </li>
  <li>
    <p><a href="http://www.waveprotocol.org/whitepapers/operational-transform">Google’s whitepaper on Operational Transformation</a></p>
  </li>
  <li>
    <p><a href="https://www.lri.fr/~mbl/ENS/CSCW/2012/papers/Ellis-SIGMOD89.pdf">Concurrency Control in Groupware Systems</a> <em>Authored by C.A. Ellis, S.J. Gibbs</em></p>
  </li>
  <li>
    <p><a href="https://hal.archives-ouvertes.fr/file/index/docid/629503/filename/doce63-ahmednacer.pdf">Evaluating CRDTs for Real-time Document Editing</a> <em>Authored by Mehdi Ahmed-Nacer, Claudia-Lavinia Ignat, G´erald Oster, Hyun-Gul Roh, Pascal Urso</em></p>
  </li>
  <li>
    <p><a href="https://hal.inria.fr/hal-00957167/document">Merging OT and CRDT Algorithms</a> <em>Authored by Mehdi Ahmed-Nacer, Pascal Urso, Valter Balegas, Nuno Pregui¸ca</em></p>
  </li>
  <li>
    <p><a href="https://en.wikipedia.org/wiki/Operational_transformation">Wikipedia on Operational Transformation</a> <em>One of the most informative articles, I have found on wikipedia, suprisingly.</em></p>
  </li>
</ul>


  </div>
</article>

  



    <script>
    (function() {
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        var GOOGLE_ANALYTICS_TRACKING_ID = "UA-83244237-1";

        ga('create', GOOGLE_ANALYTICS_TRACKING_ID, 'auto');
        ga('send', 'pageview');
    })();
</script>

</body>

</html>
)</li>

  <li><a href="/writing/deploying-nodejs-app/">Deploy a Node.js app in minutes using Heroku!</a> (26 Apr 2017 | Tags: <!DOCTYPE html>
<html lang="en">
<head>
    <!-- http redirect for github pages -->
    <script type="text/javascript">
        var host = 'srijancse.github.io';
        if ((host === window.location.host) && (window.location.protocol === 'http:')) {
            window.location.protocol = 'http'; // without ':' for firefox compatibility
        }
    </script>
    <!-- styles -->
    <link rel="stylesheet" href=" /css/main.css ">
    <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700|Lato:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="Srijan Agarwal: Web Developer" property="og:title">
    <meta content="Srijan Agarwal: Web Developer" property="twitter:title">
    <meta content="website" property="og:type">
    <meta content="Srijan Agarwal" property="og:site_name">
    <meta property="fb:admins" content="1103227056" />
    <meta name="google-site-verification" content="bnuGRmgx_XG_VFyzEgt7GUg9BX6349k3A2aGUZjn2wY" />
    <!-- title and desc -->
    <title>Deploy a Node.js app in minutes using Heroku! | Srijan Agarwal</title>
    <meta name="description" content="As more and more Node.js projects are being coded, deploying a nodejs app just got easier. I would guide you through on how one can deploy a node.js app in m...">

    <link rel="canonical" href="http://localhost:4000/writing/deploying-nodejs-app/">
    <link rel="alternate" type="application/rss+xml" title="Srijan Agarwal" href="http://localhost:4000/feed.xml">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-3981900510519098",
        enable_page_level_ads: true
      });
    </script>
</head>

<body class="width mx-auto px3 my4">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <h1 class="top-subtitle">
        <a href="/writing/">Writing</a>
        <a href="/"><div class="dot"></div></a>
    </h1>
    <h1 class="title" itemprop="name headline"><a href="">Deploy a Node.js app in minutes using Heroku!</a></h1>
    <div class="meta">
        <span class="h1" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/"><span itemprop="name">Srijan Agarwal</span></a>
        </span>
        <time datetime="2017-04-26T02:43:39+02:00" itemprop="datePublished" title="It was a beautiful day!">
            26 Apr 2017
        </time>
    </div>
  </header>

  <div class="content" itemprop="articleBody">
    <p>As more and more Node.js projects are being coded, deploying a nodejs app just got easier. I would guide you through on how one can deploy a node.js app in minutes using Heroku.</p>

<p><strong>What is Heroku?</strong></p>

<p><em>Heroku</em> is a cloud platform that lets companies/individuals build, deliver, monitor, and scale applications. It is often regarded as the fastest way to go from an idea to URL bypassing all those infrastructure headaches (i.e, one doesn’t has to worry about infrastructure; just focus on the application).</p>

<p><strong>What Heroku offers?</strong></p>

<p>Heroku offers <em>Platform as a Service [PaaS]</em> type of cloud computing, the delivery of computing services : servers, storage, databases, networking, software, and more over the Internet (“the cloud”).</p>

<p>Operating at the layer above raw computing hardware, whether physical or virtual, Platform as a Service [PaaS] provides a method for programming languages to interact with services like databases, web servers, and file storage, without having to deal with lower level requirements like how much space a database needs, whether the data must be protected by making a copy between 3 servers, or distributing the workload across servers that can be spread throughout the world. Typically, applications must be written for a specific PaaS offering to take full advantage of the service, and most platforms only support a limited set of programming languages.</p>

<p><strong>Advantages/Benefits</strong></p>

<p>There is no doubt that Heroku takes away all the pain of installing softwares, configuring servers, maintaining, and monitoring the software — it takes care of most of the configurations. Other services could easily be added as add-ons.</p>

<p><strong>Heroku</strong> is:</p>

<ol>
  <li>Easy deployment</li>
  <li>Uses version control system commands (git)</li>
  <li>Security</li>
  <li>Plenty of Add-on resources (applications, databases etc.)</li>
  <li>Processes scaling : independent scaling for each component of your app without affecting functionality and performance</li>
  <li>Isolation : each process (i.e dyno) is completely isolated from each other thorough Documentation</li>
</ol>

<p><strong>How to deploy a Node.js app :</strong></p>

<p>Here are some prerequisites you need to have before deploying :</p>

<ol>
  <li>A Node.js app. [ofcourse xD]</li>
  <li>A free Heroku account.</li>
  <li>The Heroku CLI.</li>
</ol>

<p>Let’s get down to it!</p>
<ol>
  <li>
    <p>Login to your Heroku via the command line heroku login. This will prompt for your credential.
Add Procfile to your application echo <code class="highlighter-rouge">‘web: ./node_modules/.bin/forever -m 5 server.js’ &gt;Procfile</code>
A Procfile is not necessary to deploy apps written in most languages supported by Heroku. The platform automatically detects the language, and creates a default web process type to boot the application server. 
In the case of Node.js, it will start a default web process via the start script in your <code class="highlighter-rouge">package.json</code>. Creating an explicit Procfile is recommended for greater control and flexibility for your app.As the case maybe, <code class="highlighter-rouge">web: ./node_modules/.bin/forever -m 5 server.js</code>, I am using Node.js’ forever module to start my server named server.js</p>
  </li>
  <li>
    <p>Create Heroku remote repository <code class="highlighter-rouge">heroku create appName</code></p>
  </li>
  <li>
    <p>Add the new changes made to the app <code class="highlighter-rouge">git add .</code></p>
  </li>
  <li>
    <p>Commit the snapshot <code class="highlighter-rouge">git commit -m “Added a Procfile.”</code></p>
  </li>
  <li>
    <p>Push to your app to the newly created heroku remote repository <code class="highlighter-rouge">git push heroku master</code> </p>
  </li>
</ol>

<p>Bonus: <code class="highlighter-rouge">run heroku logs</code> to see logs. 
Note: If your app runs on a database, you will need to add the database as an add-on.</p>

<p>Feel free to ping me on <a href="www.twitter.com/srijancse">Twitter</a>.</p>

  </div>
</article>

  



    <script>
    (function() {
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        var GOOGLE_ANALYTICS_TRACKING_ID = "UA-83244237-1";

        ga('create', GOOGLE_ANALYTICS_TRACKING_ID, 'auto');
        ga('send', 'pageview');
    })();
</script>

</body>

</html>
)</li>

  <li><a href="/writing/JSES6-Awesome-Features/">Awesome features you must be using in JavaScript ES6!</a> (15 Apr 2017 | Tags: <!DOCTYPE html>
<html lang="en">
<head>
    <!-- http redirect for github pages -->
    <script type="text/javascript">
        var host = 'srijancse.github.io';
        if ((host === window.location.host) && (window.location.protocol === 'http:')) {
            window.location.protocol = 'http'; // without ':' for firefox compatibility
        }
    </script>
    <!-- styles -->
    <link rel="stylesheet" href=" /css/main.css ">
    <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700|Lato:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="Srijan Agarwal: Web Developer" property="og:title">
    <meta content="Srijan Agarwal: Web Developer" property="twitter:title">
    <meta content="website" property="og:type">
    <meta content="Srijan Agarwal" property="og:site_name">
    <meta property="fb:admins" content="1103227056" />
    <meta name="google-site-verification" content="bnuGRmgx_XG_VFyzEgt7GUg9BX6349k3A2aGUZjn2wY" />
    <!-- title and desc -->
    <title>Awesome features you must be using in JavaScript ES6! | Srijan Agarwal</title>
    <meta name="description" content="    ">

    <link rel="canonical" href="http://localhost:4000/writing/JSES6-Awesome-Features/">
    <link rel="alternate" type="application/rss+xml" title="Srijan Agarwal" href="http://localhost:4000/feed.xml">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-3981900510519098",
        enable_page_level_ads: true
      });
    </script>
</head>

<body class="width mx-auto px3 my4">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <h1 class="top-subtitle">
        <a href="/writing/">Writing</a>
        <a href="/"><div class="dot"></div></a>
    </h1>
    <h1 class="title" itemprop="name headline"><a href="">Awesome features you must be using in JavaScript ES6!</a></h1>
    <div class="meta">
        <span class="h1" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/"><span itemprop="name">Srijan Agarwal</span></a>
        </span>
        <time datetime="2017-04-15T09:43:39+02:00" itemprop="datePublished" title="It was a beautiful day!">
            15 Apr 2017
        </time>
    </div>
  </header>

  <div class="content" itemprop="articleBody">
    <div class="image-wrap">
<div class="image-block">
    <img src="/images/js.png" alt="js" />
</div>
</div>

<p>As the JavaScript community continued to expand rapidly in last few years, a lot of good things have happened to JavaScript as a language. One of those good things was its penetration into the server-side development world via Node.js (yaay).</p>

<p><strong>Disclaimer</strong>: the list if highly biased and subjective. It is in no way was intended to diminish usefulness of other ES6 features, which didn’t make it to the list simply because I had to limit the number to 3.</p>

<h3> 1. Default Parameters in ES6 </h3>
<p>Before the arrival of ES2015, when one wanted to specify a default parameter in a function, he/she had to do it in the body of the function like so:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function greetHuman(name) {
    name = name || 'human';
    return 'Hello ' + name + ', we come in peace';
}
    greetHuman();
    greetHuman('Srijan');
</code></pre></div></div>

<p>They were okay until the value was 0, because 0 is falsy in JavaScript and it would default to the hard-coded value instead of becoming the value itself. Of course, who needs 0 as a value (:P), so we just ignored this flaw and used the logic OR anyway. No more!</p>

<p>With ES6, one can now do this in a function head and as such, we no longer have to perform checks for undefined parameters in the function’s body.</p>

<p>Here’s what the code in ES6 would look like if you’re combining arrow functions, template literal, and default:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const greetHuman = (name = 'human') =&gt; `Hello ${human}, we come in peace`;
greetHuman('Srijan'); 'Hello Srijan, we come in peace'
greetHuman(); 'Hello human, we come in peace'

</code></pre></div></div>
<h3> 2. Arrow Functions in ES6 </h3>
<p>If you are a JavaScript developer, you would already know the good old way of declaring functions.</p>

<p>This is probably one feature I waited the most. Now we have them in ES6. The arrows are amazing because they would make your this behave properly, i.e., <code class="highlighter-rouge">this</code> will have the same value as in the context of the function—it won’t mutate. The mutation typically happens each time you create a closure.</p>

<p>Using arrows functions in ES6 allows us to stop using <code class="highlighter-rouge">that = this or self = this or _this = this or .bind(this)</code>.</p>

<p>Good ol’ ES5 code :</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var _this = this
$('.btn').click(function(event){
  _this.send()
})
</code></pre></div></div>

<p>This is the ES6 code without <code class="highlighter-rouge">_this = this:</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$('.btn').click((event) =&gt;{
  this.send()
})
</code></pre></div></div>

<p>As you can see, the code looks shorter and cleaner — we can even omit the curly braces <code class="highlighter-rouge">{}</code> (one-liners only). There is support for implicit return as well, so we can conveniently omit the <code class="highlighter-rouge">return</code> keyword.</p>

<h3> 3. Template Literals in ES6 </h3>

<p>Template literals or interpolation in other languages is a way to output variables in the string. This remains one of the most important feature as it really makes string concatenation easier and much more bearable.</p>

<p>So in ES5 we had to break the string like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var name = 'Your name is ' + first + ' ' + last + '.'
var url = 'http://localhost/api/' + id
</code></pre></div></div>

<p>Luckily, in ES6 we can use a new syntax <code class="highlighter-rouge">${NAME}</code> inside of the back-ticked string:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var name = `Your name is ${first} ${last}.`
var url = `http://localhost/api/${id}`
</code></pre></div></div>

<p>You can learn more about ES6 features <a href="http://exploringjs.com/es6/">here</a>. A <a href="https://github.com/azat-co/cheatsheets/tree/master/es6">cheatsheet</a> too.</p>

  </div>
</article>

  



    <script>
    (function() {
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        var GOOGLE_ANALYTICS_TRACKING_ID = "UA-83244237-1";

        ga('create', GOOGLE_ANALYTICS_TRACKING_ID, 'auto');
        ga('send', 'pageview');
    })();
</script>

</body>

</html>
)</li>

  <li><a href="/writing/Experiences-With-Node/">My Experiences with NodeJS</a> (04 Jan 2017 | Tags: <!DOCTYPE html>
<html lang="en">
<head>
    <!-- http redirect for github pages -->
    <script type="text/javascript">
        var host = 'srijancse.github.io';
        if ((host === window.location.host) && (window.location.protocol === 'http:')) {
            window.location.protocol = 'http'; // without ':' for firefox compatibility
        }
    </script>
    <!-- styles -->
    <link rel="stylesheet" href=" /css/main.css ">
    <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700|Lato:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="Srijan Agarwal: Web Developer" property="og:title">
    <meta content="Srijan Agarwal: Web Developer" property="twitter:title">
    <meta content="website" property="og:type">
    <meta content="Srijan Agarwal" property="og:site_name">
    <meta property="fb:admins" content="1103227056" />
    <meta name="google-site-verification" content="bnuGRmgx_XG_VFyzEgt7GUg9BX6349k3A2aGUZjn2wY" />
    <!-- title and desc -->
    <title>My Experiences with NodeJS | Srijan Agarwal</title>
    <meta name="description" content="For the past few months, I have been working with Node.js aka The Node (:D).">

    <link rel="canonical" href="http://localhost:4000/writing/Experiences-With-Node/">
    <link rel="alternate" type="application/rss+xml" title="Srijan Agarwal" href="http://localhost:4000/feed.xml">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-3981900510519098",
        enable_page_level_ads: true
      });
    </script>
</head>

<body class="width mx-auto px3 my4">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <h1 class="top-subtitle">
        <a href="/writing/">Writing</a>
        <a href="/"><div class="dot"></div></a>
    </h1>
    <h1 class="title" itemprop="name headline"><a href="">My Experiences with NodeJS</a></h1>
    <div class="meta">
        <span class="h1" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/"><span itemprop="name">Srijan Agarwal</span></a>
        </span>
        <time datetime="2017-01-04T16:00:39+01:00" itemprop="datePublished" title="It was a beautiful day!">
            4 Jan 2017
        </time>
    </div>
  </header>

  <div class="content" itemprop="articleBody">
    <p>For the past few months, I have been working with Node.js aka The Node (:D).</p>

<p><strong>Node : Easy to learn, Impossible to master</strong></p>

<p>If you want to summarize in a line, I would say this (^). If you’ve some experience with JavaScript, then Node is very easy to learn. Google for a few tutorials, play around with <em>Express.js</em>, and you’re good to go. But as soon as you start playing, you remember, what about database? And, then <em>NPM</em> comes to the rescue. Few SQL packages could be found, but I always go with Mongo. Easy to work it and open sourced.</p>

<p>Packages that consist of trivial code no more than 10 lines of code are downloaded in the thousands every day from NPM. Seriously!? You need a dependency for array type checking? And these packages are used by some huge tools such as React.
You’ll never master something that moves at break-neck speed, not to mention the potential of dependency instability.</p>

<p><strong>Want to catch errors? Good luck, boss!</strong></p>

<p>Me, Coming from other languages such as Python or PHP I’d expect throwing and catching errors, or even returning an error from a function would be a straightforward way of handling errors. It’s not the case with Node.</p>

<p>Instead, one gets to pass errors around in the callbacks (or promises) — that’s right! No throwing of exceptions. Not to mention if you forget to return your callback on an error, it continues to run and triggers another set of errors after you returned the initial one.</p>

<p>Even if you do manage to come up with a solid standard for your own errors, you can’t confirm (without reading the source) that the many of the NPM packages you have installed follow the same pattern.</p>

<p><strong>Final thoughts on Node</strong></p>

<p>Go for it. (:D) It’s amazing. It’s fast. It makes Real-Time easy. Well Documented API. And at last, It’s fun.</p>

  </div>
</article>

  



    <script>
    (function() {
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        var GOOGLE_ANALYTICS_TRACKING_ID = "UA-83244237-1";

        ga('create', GOOGLE_ANALYTICS_TRACKING_ID, 'auto');
        ga('send', 'pageview');
    })();
</script>

</body>

</html>
)</li>

</ul>

<div id="tag-cloud">
  Jekyll::Drops::SiteDrop
</div>

    <script>
    (function() {
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        var GOOGLE_ANALYTICS_TRACKING_ID = "UA-83244237-1";

        ga('create', GOOGLE_ANALYTICS_TRACKING_ID, 'auto');
        ga('send', 'pageview');
    })();
</script>

</body>

</html>
