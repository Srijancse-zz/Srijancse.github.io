<html>
<script src="https://www.gstatic.com/firebasejs/3.8.0/firebase.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDILQS_zBOVGLbD1a3StGkw-as6AIY7KBI",
    authDomain: "srijantextbox.firebaseapp.com",
    databaseURL: "https://srijantextbox.firebaseio.com",
    projectId: "srijantextbox",
    storageBucket: "srijantextbox.appspot.com",
    messagingSenderId: "523068385597"
  };
  firebase.initializeApp(config);
  var database = firebase.database().ref();
  var textboxRef = database.child('textbox'); //Get a reference to the "textbox" child
  var $textbox = $('#textbox'); //Saves a referenve to the textarea element using jQuery

  //When anything changes (added, removed, updated) in the "textbox" child in the database
  textboxRef.on('value', function(snapshot) {
    console.log("From Firebase:", snapshot.val());
    $textbox.val(snapshot.val().text); //Set the value of the textarea to the value returned by Firebase (specifically the "text" property of the "textbox" child)
  });

  //When any key is released while the textarea is in focus
  $textbox.keyup(function() {
    //Updates the properties and values in the database child called "textbox" with the object provided. The "set" function is used instead of the "update" function so that if the database child "textbox" of its properties are removed, this will create it as well as update it
    textboxRef.set({
      text: $textbox.val()
    });
  });
</script>

<link rel="stylesheet" href="style.css">
<textarea name="textbox" id="textbox" placeholder="Type here"></textarea>

</html>
